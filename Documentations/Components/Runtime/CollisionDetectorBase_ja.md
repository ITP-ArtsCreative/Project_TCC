# CollisionDetectorBase

#### **Namespace**: Unity.TinyCharacterController.Components.Utility
---

## 概要:
`CollisionDetectorBase` は、衝突検出の基本機能を提供するコンポーネントです。このコンポーネントは、特定のレイヤーやタグを持つオブジェクトとの衝突を検出し、衝突が発生した際にイベントを発火させることができます。衝突検出のオーナーとして `CharacterSettings` コンポーネントを持ち、このオーナーが持つコライダーとは衝突しません。

## 機能と操作:
- **衝突検出のタイミングとレイヤー**: 衝突検出の実行タイミングと、検出対象のレイヤーを設定できます。
- **衝突イベントのコールバック**: 衝突が検出された際に発火するイベントを設定できます。
- **衝突オブジェクトのキャッシュ**: 現在のフレームで衝突したオブジェクトと、コンポーネントがアクティブである間に衝突したオブジェクトのリストを保持します。
- **衝突検出のクリア**: 衝突検出のキャッシュをクリアする機能を提供します。

## プロパティ
| Name | Description |
|------------------|------|
| `Timing` | 衝突検出の実行タイミング。 |
| `Owner` | 衝突検出のオーナー。このオーナーのコライダーとは衝突しません。 |
| `CacheTargetType` | 衝突検出時にキャッシュするターゲットのタイプ。 |
| `HitLayer` | 衝突検出を行うレイヤー。 |
| `HitTags` | 衝突を検出する対象のタグ。 |
| `OnHitObjects` | 衝突が検出された際に発火するイベント。 |

## メソッド
| Name | Function |
|------------------|------|
|  ``public void`` ClearHitObjectsCache()  | 衝突検出のキャッシュをクリアします。 |
|  ``public Collider`` GetColliderForGameObject( ``GameObject obj`` )  | 指定されたGameObjectに関連付けられたColliderを取得します。もし存在しない場合はnullを返します。 |

---
## その他の注意事項
- `HitColliders` および `HitObjects` のリストは、コンポーネントが衝突を検出したオブジェクトを追跡します。これらのリストは、新しいフレームの開始時やコンポーネントがアクティブになったときに更新されます。
- `OnHitObjects` イベントは、衝突が検出された際にコールバックとして使用できる `UnityEvent` です。
- このコンポーネントは、カスタムの衝突検出ロジックを実装するための基礎として機能します。必要に応じて、派生クラスでこの基本クラスを拡張して、特定の衝突検出の振る舞いを実装できます。

